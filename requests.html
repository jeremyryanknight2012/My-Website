
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StudyMath</title>
  <style>
    :root{
      --bg: #0b1220;
      --panel: #0f1a33;
      --panel2: #0c162e;
      --text: #e8eefc;
      --muted: #a9b6d6;
      --border: rgba(255,255,255,.10);
      --hover: rgba(255,255,255,.07);
      --active: rgba(255,255,255,.12);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
    }

    .app {
      display: grid;
      grid-template-rows: 56px 1fr;
      grid-template-columns: 260px 1fr;
      height: 100vh;
    }

    header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      padding: 0 16px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
    }

    .brand {
      font-weight: 800;
      letter-spacing: .2px;
      font-size: 18px;
    }

    aside {
      border-right: 1px solid var(--border);
      background: rgba(255,255,255,.02);
      padding: 14px;
    }

    .nav-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .12em;
      color: var(--muted);
      margin: 6px 10px 10px;
    }

    .nav {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav a {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid transparent;
      transition: background .15s ease, border-color .15s ease;
      cursor: pointer;
      user-select: none;
    }

    .nav a:hover { background: var(--hover); border-color: var(--border); }
    .nav a.active { background: var(--active); border-color: var(--border); }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.35);
      flex: 0 0 auto;
    }

    main {
      padding: 18px;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .card {
      max-width: 900px;
      background: rgba(255,255,255,.03);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
    }

    .card h1 {
      margin: 0 0 12px 0;
      font-size: 22px;
    }

    .card p {
      margin: 0 0 14px 0;
      color: var(--muted);
      line-height: 1.5;
    }

    /* Form styling to match UI */
    form {
      max-width: 520px;
      margin-top: 8px;
    }

    label {
      display: inline-block;
      margin-bottom: 6px;
      font-weight: 800;
      color: var(--text);
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: .10em;
    }

    select, textarea, input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      outline: none;
      font-weight: 700;
    }

    textarea { resize: vertical; min-height: 120px; }

    select option { color: #000; } /* browser uses native select; options often need dark text */

    .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 800;
      cursor: pointer;
      transition: background .15s ease, transform .05s ease;
    }

    .btn:hover { background: rgba(255,255,255,.10); }
    .btn:active { transform: translateY(1px); }

    #status {
      margin-top: 12px;
      color: var(--muted);
      font-weight: 700;
    }

    .status-ok { color: #b7f7c9; }
    .status-bad { color: #ffb7b7; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">StudyMath</div>
    </header>

    <aside>
      <div class="nav-title">Pages</div>
      <nav class="nav" id="nav">
        <a href="./" data-key="home"><span class="dot"></span><span>Home</span></a>
        <a href="./games.html" data-key="games"><span class="dot"></span><span>Games</span></a>
        <a href="./requests.html" data-key="requests"><span class="dot"></span><span>Requests</span></a>
      </nav>
    </aside>

    <main>
      <div class="card">
        <h1>Requests</h1>
        <p>Submit a request or report a bug. Your message will be sent using EmailJS.</p>

        <!-- EmailJS SDK -->
        <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
        <script>
          (function () {
            emailjs.init("WVn4FyckWoY68y1Kp");
          })();
        </script>

        <form id="requestForm">
          <label><strong>Request Type</strong></label><br>
          <select name="request_type" required>
            <option value="">Select an option</option>
            <option>Game Request</option>
            <option>Movie Request</option>
            <option>TV Show Request</option>
            <option>YouTube Channel Request</option>
            <option>Anime Request</option>
            <option>Feature Suggestion</option>
            <option>Report a Bug</option>
            <option>Other</option>
          </select>

          <label><strong>Details</strong></label><br>
          <textarea name="details" required rows="5"
            placeholder="Describe your request..."></textarea>

          <label><strong>Name (optional)</strong></label><br>
          <input type="text" name="name" placeholder="Your name (optional)">

          <button class="btn" type="submit">Submit Request</button>

          <p id="status"></p>
        </form>

        <script>
          const nav = document.getElementById("nav");

          function normalizeUrl(u) { return (u || "").replace(/\/+$/, ""); }
          function setActiveFromUrl() {
            const current = normalizeUrl(window.location.href);
            const links = [...nav.querySelectorAll("a")];
            links.forEach(a => a.classList.remove("active"));

            let best = null;
            for (const a of links) {
              const href = normalizeUrl(a.href);
              if (current === href || current.startsWith(href + "/")) {
                if (!best || href.length > best.href.length) best = a;
              }
            }
            if (best) best.classList.add("active");
          }

          nav.addEventListener("click", (e) => {
            const a = e.target.closest("a");
            if (!a) return;
            e.preventDefault();
            window.location.href = a.href;
          });

          setActiveFromUrl();

          // Form submit
          document.getElementById("requestForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const statusEl = document.getElementById("status");
            statusEl.className = "";
            statusEl.textContent = "Sending...";

            emailjs.sendForm(
              "service_4caoubc",
              "template_67jfhnb",
              this
            ).then(
              function () {
                statusEl.textContent = "✅ Your request has been sent!";
                statusEl.classList.add("status-ok");
                document.getElementById("requestForm").reset();
              },
              function (error) {
                statusEl.textContent = "❌ Failed to send request. Please try again.";
                statusEl.classList.add("status-bad");
                console.error("EmailJS Error:", error);
              }
            );
          });
        </script>
      </div>
    </main>
  </div>
</body>
</html>
